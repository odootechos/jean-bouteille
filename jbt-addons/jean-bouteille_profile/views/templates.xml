<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="jb_cart_lines_inherit" inherit_id="website_sale.cart_lines">
        <xpath expr="//table/thead/tr/th[3]" position="after">
            <th class="text-center">Unit of measure</th>
        </xpath>
        <xpath expr="//table/tbody/t/tr/td[4]" position="after">
            <td>
                <t t-if="line.product_id.product_tmpl_id">
                    <t t-if="line.product_id.product_tmpl_id.uom_id">
                        <span t-field="line.product_id.product_tmpl_id.uom_id.name"/>
                    </t>
                    <t t-if="not line.product_id.product_tmpl_id.uom_id">
                        <span></span>
                    </t>
                </t>
                <t t-if="not line.product_id.product_tmpl_id"><span></span></t>
            </td>
        </xpath>
    </template>

    <template id="website_payment_jb" inherit_id="website_sale.payment" name="Payment JB">
        <xpath expr="//div[@id='payment_method']" position="replace">
            <div id="payment_method" class="mt-3" t-if="(acquirers or tokens) and website_sale_order.amount_total">
                <h3 class="mb24">Pay with </h3>
                <t t-call="payment.payment_tokens_list">
                    <t t-set="mode" t-value="'payment'"/>
                    <t t-set="submit_txt">Confirm Command</t>
                    <t t-set="icon_right" t-value="1"/>
                    <t t-set="icon_class" t-value="'fa-chevron-right'"/>
                    <t t-set="submit_class" t-value="'btn btn-primary'"/>
                    <t t-set="pms" t-value="tokens"/>
                    <t t-set="form_action" t-value="'/shop/payment/token'"/>
                    <t t-set="prepare_tx_url" t-value="'/shop/payment/transaction/'"/>
                    <t t-set="partner_id" t-value="partner"/>

                    <t t-set="back_button_icon_class" t-value="'fa-chevron-left'"/>
                    <t t-set="back_button_txt">Return to Cart</t>
                    <t t-set="back_button_class" t-value="'btn btn-secondary'"/>
                    <t t-set="back_button_link" t-value="'/shop/cart'"/>
                </t>
            </div>
        </xpath>
    </template>

    <template id="cart_jb" inherit_id="website_sale.cart" name="Jean Bouteille Cart">
        <xpath expr="//div[@id='wrap']" position="replace">
            <div id="wrap">
                <div class="container oe_website_sale py-2">
                    <div class="row">
                        <div class="col-12">
                            <t t-call="website_sale.wizard_checkout">
                                <t t-set="step" t-value="10" />
                            </t>
                        </div>
                        <div class="col-12 col-xl-8 oe_cart">
                            <div class="row">
                                <div class="col-lg-12">
                                    <div t-if="abandoned_proceed or access_token" class="mt8 mb8 alert alert-info" role="alert"> <!-- abandoned cart choices -->
                                        <t t-if="abandoned_proceed">
                                            <p>Your previous cart has already been completed.</p>
                                            <p t-if="website_sale_order">Please proceed your current cart.</p>
                                        </t>
                                        <t t-if="access_token">
                                            <p>This is your current cart.</p>
                                            <p>
                                                <strong><a t-attf-href="/shop/cart/?access_token=#{access_token}&amp;revive=squash">Click here</a></strong> if you want to restore your previous cart. Your current cart will be replaced with your previous cart.</p>
                                            <p>
                                                <strong><a t-attf-href="/shop/cart/?access_token=#{access_token}&amp;revive=merge">Click here</a></strong> if you want to merge your previous cart into current cart.
                                            </p>
                                        </t>
                                    </div>
                                    <t t-call="website_sale.cart_lines" />
                                    <div class="clearfix" />
                                    <a role="button" href="/shop" class="btn btn-secondary mb32 d-none d-xl-inline-block">
                                        <span class="fa fa-chevron-left" />
                                        <span class="">Continue Shopping</span>
                                    </a>
                                    <a role="button" t-if="website_sale_order and website_sale_order.website_order_line" class="btn btn-primary float-right d-none d-xl-inline-block" href="/shop/checkout?express=1">
                                        <span class="">Next</span>
                                        <span class="fa fa-chevron-right" />
                                    </a>
                                    <div class="oe_structure" id="oe_structure_website_sale_cart_1"/>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-xl-4">
                            <t t-call="website_sale.short_cart_summary"/>
                            <div class="d-xl-none mt8">
                                <a role="button" href="/shop" class="btn btn-secondary mb32">
                                    <span class="fa fa-chevron-left" />
                                    Continue<span class="d-none d-md-inline"> Shopping</span>
                                </a>
                                <a role="button" t-if="website_sale_order and website_sale_order.website_order_line" class="btn btn-primary float-right" href="/shop/checkout?express=1">
                                    <span class="">Next</span>
                                    <span class="fa fa-chevron-right" />
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="oe_structure" id="oe_structure_website_sale_cart_2"/>
            </div>
        </xpath>
    </template>

    <template id="short_cart_summary_jb" inherit_id="website_sale.short_cart_summary" name="Short Cart right column">
        <xpath expr="//div[@class='card js_cart_summary']" position="replace">
            <div class="card js_cart_summary" t-if="website_sale_order and website_sale_order.website_order_line" >
                <div class="card-body">
                    <h4 class="d-none d-xl-block">Order Total</h4>
                    <hr class="d-none d-xl-block"/>
                    <div>
                        <t t-call="website_sale.total">
                            <t t-set='no_rowspan'>1</t>
                        </t>
                        <a role="button" t-if="website_sale_order and website_sale_order.website_order_line" class="btn btn-secondary float-right d-none d-xl-inline-block" href="/shop/checkout?express=1">
                            <span>Next</span>
                        </a>
                    </div>
                </div>
            </div>
        </xpath>
    </template>

    <template id="pricelist_jb_test" inherit_id="website_sale.pricelist_list" name="Pricelists Dropdown JB">
        <xpath expr="//div" position="replace"/>
    </template>
</odoo>
